'use client'

import { useUser } from "@stackframe/stack";
import { useTheme } from "next-themes";
import Link from "next/link";
import { usePathname } from "next/navigation";

export function SidebarClient() {

  const pathname = usePathname();
  const { theme } = useTheme();
  const user = useUser();

  return (
    <aside className="relative w-14">
      <div className="group flex flex-col gap-2 border-r absolute overflow-hidden p-2 h-full w-full hover:w-64 z-20 bg-background transition-all">
        <Link className={`${pathname === `/editor/${user?.id}` ? 'bg-secondary' : ''} hover:bg-secondary flex items-center justify-start p-3 rounded-md h-10 transition-none`} href={`/editor/${user?.id}`}>
          <div className="h-4 w-4">
            <svg height="100%" viewBox="0 0 214 224" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M41.4274 0C40.0914 0.02695 38.8196 0.578579 37.8869 1.53565C36.9543 2.49272 36.4358 3.77836 36.4434 5.11467L36.3874 50.9227C36.3874 52.276 36.9474 53.564 37.8714 54.5627C38.3367 55.0275 38.8901 55.3948 39.499 55.6432C40.108 55.8916 40.7604 56.0161 41.4181 56.0093H73.4221L149.927 221.023C150.322 221.903 150.961 222.651 151.768 223.179C152.576 223.707 153.518 223.992 154.482 224H208.718C210.067 223.99 211.358 223.447 212.307 222.488C213.257 221.53 213.789 220.235 213.786 218.885V173.077C213.792 172.408 213.666 171.744 213.414 171.124C213.162 170.503 212.79 169.939 212.318 169.464C211.847 168.988 211.286 168.61 210.668 168.353C210.05 168.095 209.388 167.963 208.718 167.963H189.93L113.789 2.94933C113.377 2.07285 112.725 1.33081 111.909 0.808919C111.093 0.287032 110.147 0.00659441 109.178 0L41.4741 0H41.4274ZM46.4674 10.1733H105.893L182.053 175.196C182.449 176.076 183.09 176.823 183.9 177.349C184.709 177.875 185.652 178.158 186.617 178.164H203.575V213.789H157.637L81.1314 48.776C80.7353 47.8977 80.0958 47.1513 79.2886 46.6253C78.4813 46.0992 77.5402 45.8156 76.5767 45.808H46.4301L46.4674 10.1733ZM65.2554 87.052C64.3032 87.0565 63.3718 87.3307 62.569 87.8428C61.7663 88.3548 61.125 89.0838 60.7194 89.9453L0.49141 216.655C0.122977 217.435 -0.0427999 218.296 0.00940274 219.157C0.0616053 220.018 0.330103 220.853 0.790077 221.583C1.23752 222.302 1.86213 222.894 2.60407 223.303C3.34602 223.711 4.18044 223.922 5.02741 223.916H62.6047C63.572 223.92 64.5206 223.65 65.3413 223.138C66.162 222.626 66.8214 221.893 67.2434 221.023L98.7901 154.149C99.1148 153.465 99.281 152.715 99.2761 151.957C99.2713 151.2 99.0956 150.453 98.7621 149.772L69.8941 89.9453C69.4741 89.0793 68.8191 88.3488 68.0038 87.8372C67.1886 87.3256 66.2459 87.0535 65.2834 87.052H65.2554ZM65.3114 103.889L88.5327 151.975L59.3941 213.761H13.0634L65.3114 103.889Z" fill={theme === 'dark' ? "white" : "black"} />
            </svg>
          </div>
          <span className="hidden group-hover:inline text-sm ml-2">Lambda</span>
        </Link>
        <Link className={`${pathname === `/editor/${user?.id}/dynamodb` ? 'bg-secondary' : ''} hover:bg-secondary flex items-center justify-start p-3 rounded-md h-10 transition-none`} href={`/editor/${user?.id}/dynamodb`}>
          <div className="h-4 w-4">
            <svg height="100%" viewBox="0 0 179 187" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M129.348 161.326V142.852C118.422 151.283 95.7459 156.838 68.2168 156.838C40.6703 156.838 17.9947 151.275 7.06784 142.837V161.295C7.06784 170.396 32.1832 180.541 68.2168 180.541C104.207 180.541 129.297 170.412 129.348 161.326ZM129.357 108.616L136.425 108.577V108.616C136.425 112.644 134.193 116.392 129.937 119.844C135.136 124.051 136.425 128.188 136.425 131.134C136.412 141.185 136.412 151.236 136.425 161.288C136.425 175.944 107.105 187 68.2168 187C29.5358 187 0.336959 176.06 0.0428072 161.521C-0.00363682 151.369 -0.0122886 141.216 0.0168524 131.064C0.0255039 128.142 1.31458 124.051 6.46224 119.867C1.34054 115.675 0.0341561 111.592 0.00820152 108.686V78.3608C0.0255046 75.4233 1.33189 71.3249 6.47089 67.1564C1.34054 62.9489 0.0341561 58.8816 0.00820152 55.9753C0.00820152 45.402 -0.00910175 34.6651 0.0255043 25.6112C0.163929 11.0018 29.4234 0 68.2168 0C86.8954 0 104.839 2.77383 117.435 7.58908L114.71 13.5575C102.944 9.03833 85.9957 6.46708 68.2168 6.46708C32.1832 6.46708 7.07649 16.5962 7.07649 25.7125C7.07649 34.8132 32.1832 44.9579 68.2168 44.9579C69.2117 44.9579 70.1374 44.9579 71.1064 44.919L71.3919 51.3705C70.3364 51.412 69.278 51.4276 68.2168 51.4172C40.6703 51.4172 17.9947 45.854 7.06784 37.4078V55.952C7.1111 59.4582 10.961 62.5203 14.1707 64.4682C23.8258 70.2029 41.1116 74.1221 60.3699 74.9247L60.0498 81.384C40.5492 80.5658 23.4538 76.7869 12.4664 71.0055C9.71521 72.9144 7.07649 75.4701 7.07649 78.4231C7.07649 87.5238 32.1832 97.6685 68.2168 97.6685C71.7697 97.6685 75.2389 97.5595 78.6246 97.3413L79.1437 103.777C75.585 104.011 71.9427 104.128 68.2168 104.128C40.6703 104.128 17.9947 98.5724 7.06784 90.1262V108.577C7.1111 112.177 10.9524 115.239 14.1707 117.179C25.2014 123.739 45.9218 127.822 68.2168 127.822H69.7914V134.289H68.2168C45.5498 134.289 25.0457 130.339 12.4664 123.701C9.72386 125.609 7.07649 128.173 7.07649 131.134C7.07649 140.234 32.1832 150.379 68.2168 150.379C104.198 150.379 129.279 140.266 129.348 131.173V131.118C129.348 128.181 126.727 125.625 123.984 123.732C122.137 124.71 120.224 125.584 118.257 126.35L115.523 120.397C118.125 119.399 120.362 118.329 122.237 117.187C125.49 115.208 129.357 112.114 129.357 108.616ZM167.225 54.7365H143.719C143.154 54.7398 142.597 54.6187 142.097 54.3838C141.596 54.1488 141.167 53.8071 140.846 53.3885C140.518 52.9691 140.304 52.4862 140.222 51.9786C140.139 51.4711 140.19 50.9532 140.37 50.4666L150.787 22.44H104.043L81.6959 61.1957H104.389C105.496 61.1957 106.534 61.6632 107.201 62.4736C107.529 62.8701 107.753 63.3285 107.857 63.8143C107.96 64.3002 107.94 64.8008 107.797 65.2786L88.3402 130.456L167.225 54.7365ZM178.031 53.7391L83.8155 144.185C83.2718 144.7 82.553 145.037 81.7726 145.143C80.9923 145.249 80.195 145.117 79.507 144.769C78.8226 144.405 78.2895 143.849 77.9895 143.186C77.6895 142.524 77.639 141.79 77.8459 141.099L99.7689 67.655H75.8388C75.2292 67.6508 74.6312 67.5052 74.1023 67.2323C73.5734 66.9593 73.1316 66.5682 72.8194 66.0967C72.5049 65.6194 72.3304 65.0779 72.3123 64.5232C72.2941 63.9684 72.4329 63.4186 72.7156 62.9255L98.7913 17.7027C99.0869 17.1867 99.533 16.753 100.082 16.4482C100.631 16.1434 101.261 15.9791 101.906 15.9729H155.718C156.86 15.9729 157.933 16.4794 158.591 17.3287C158.917 17.7471 159.13 18.2287 159.213 18.7348C159.296 19.2408 159.245 19.7573 159.066 20.2427L148.65 48.2772H175.47C176.889 48.2772 178.152 49.0485 178.714 50.2329C178.987 50.8151 179.067 51.456 178.944 52.0782C178.821 52.7004 178.509 53.2773 178.031 53.7391ZM12.3712 161.467C17.0717 163.853 22.0658 165.735 27.2518 167.077L29.2676 160.89C24.6099 159.683 20.1219 157.996 15.8924 155.864L12.3712 161.467ZM27.2518 114.841L29.2676 108.647C24.6095 107.437 20.1215 105.748 15.8924 103.614L12.3712 109.224C17.0717 111.61 22.0658 113.492 27.2518 114.834V114.841ZM12.3712 56.9727L15.8924 51.3705C19.5087 53.2716 24.0162 54.9702 29.2676 56.4039L27.2605 62.5905C22.0744 61.2492 17.0803 59.3664 12.3799 56.9805L12.3712 56.9727Z" fill={theme === 'dark' ? "white" : "black"} />
            </svg>
          </div>
          <span className="hidden group-hover:inline text-sm ml-2">DynamoDB</span>
        </Link>
        <Link className={`${pathname === `/editor/${user?.id}/s3` ? 'bg-secondary' : ''} hover:bg-secondary flex items-center justify-start p-3 rounded-md h-10 transition-none`} href={`/editor/${user?.id}/s3`}>
          <div className="h-4 w-4">
            <svg height="100%" viewBox="0 0 200 190" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M177.386 104.08L178.428 96.995C186.65 101.555 189.35 104.294 190.183 105.474C188.794 105.719 185.304 105.838 177.386 104.08ZM158.511 167.319L158.467 167.897C158.467 168.562 156.67 171.103 148.709 173.977C144.647 175.4 140.473 176.544 136.224 177.397C124.025 179.97 109.066 181.387 94.0889 181.387C54.0466 181.387 29.7365 172.013 29.7365 167.897L29.6931 167.319L11.5299 44.3492C12.7049 44.9667 13.9552 45.5657 15.2807 46.1462C15.6511 46.3046 16.0215 46.455 16.392 46.5975C17.5496 47.0883 18.7564 47.5633 20.0124 48.0225L21.5666 48.5688C22.9094 49.0279 24.2928 49.4712 25.7166 49.8987L26.8453 50.2392C28.6454 50.7511 30.515 51.2446 32.454 51.7196L33.9821 52.0679C35.5044 52.4163 37.0498 52.7514 38.6184 53.0733C41.0487 53.5635 43.4888 54.0122 45.9375 54.4192L46.988 54.6012C49.1759 54.9549 51.3986 55.2768 53.6559 55.5671C54.2753 55.6515 54.9004 55.7307 55.5313 55.8046C57.2619 56.0157 59.01 56.2189 60.7753 56.4142L62.8591 56.6279C64.9775 56.839 67.1191 57.0237 69.2839 57.1821L69.9871 57.2533C72.3776 57.4275 74.7797 57.5753 77.1934 57.6967L79.2163 57.7917C81.0454 57.8708 82.8773 57.9368 84.7121 57.9896C92.8006 58.2335 100.897 58.1648 108.979 57.7837L110.993 57.6967C113.407 57.5753 115.809 57.4275 118.199 57.2533L118.894 57.19C121.064 57.0317 123.212 56.8417 125.336 56.62L127.402 56.4142C129.179 56.2242 130.942 56.021 132.69 55.8046L134.522 55.5671C136.791 55.2715 139.025 54.9496 141.225 54.6012L142.188 54.4429C144.058 54.1262 145.893 53.7964 147.693 53.4533L149.533 53.0812C151.148 52.754 152.728 52.411 154.274 52.0521L155.715 51.7196C157.671 51.2446 159.564 50.7458 161.393 50.2233L162.392 49.9225C163.83 49.4969 165.257 49.0403 166.672 48.5529C167.176 48.384 167.668 48.2099 168.148 48.0304C169.45 47.5607 170.695 47.0725 171.881 46.5658C172.223 46.4339 172.559 46.2967 172.888 46.1542C174.22 45.5736 175.482 44.9719 176.674 44.3492L168.2 101.705C146.599 95.5304 117.8 83.5604 104.725 77.9554C104.713 75.6764 103.713 73.4941 101.944 71.8848C100.174 70.2755 97.7777 69.37 95.2784 69.3658C90.069 69.3658 85.8321 73.2371 85.8321 77.9792C85.8321 82.7213 90.069 86.6004 95.2784 86.6004C96.9801 86.6004 98.5602 86.1571 99.9407 85.4288C114.874 91.8571 144.602 104.167 166.924 110.366L158.511 167.319ZM94.0889 8.61333C143.378 8.61333 178.098 22.5387 178.74 30.2733L178.619 31.1679C178.532 31.4292 178.35 31.6983 178.202 31.9675C178.072 32.1892 177.976 32.4187 177.794 32.6562C177.586 32.9175 177.29 33.1946 177.013 33.4638C176.769 33.7013 176.57 33.9387 176.283 34.1762C175.953 34.4533 175.528 34.7304 175.128 35.0075C174.781 35.245 174.486 35.4825 174.095 35.7279C173.635 36.0129 173.088 36.29 172.559 36.575C172.124 36.8125 171.734 37.05 171.256 37.2875C170.666 37.5725 169.98 37.8654 169.329 38.1583C168.817 38.38 168.339 38.6096 167.792 38.8313C167.063 39.1321 166.255 39.4171 165.465 39.71C164.875 39.9237 164.337 40.1375 163.703 40.3592C162.861 40.6442 161.923 40.9292 161.011 41.2062C160.36 41.4121 159.726 41.6258 159.032 41.8317C158.068 42.1087 157.009 42.3779 155.993 42.6471C155.255 42.8371 154.56 43.0429 153.796 43.225C152.72 43.4942 151.556 43.7396 150.419 44.0008C149.612 44.175 148.847 44.365 148.005 44.5392C146.798 44.7925 145.514 45.0221 144.246 45.2596C143.395 45.4179 142.588 45.5842 141.702 45.7346C140.356 45.9721 138.924 46.1858 137.517 46.3996C136.649 46.5421 135.798 46.6846 134.895 46.8112C133.454 47.0171 131.926 47.1913 130.424 47.3813C129.469 47.4921 128.575 47.6187 127.602 47.7296C126.031 47.9117 124.372 48.0542 122.74 48.2046C121.797 48.3049 120.836 48.3999 119.858 48.4896C118.225 48.6162 116.506 48.7192 114.822 48.83C113.763 48.9013 112.738 48.9883 111.662 49.0517C109.864 49.1467 107.998 49.21 106.148 49.2733C105.107 49.3129 104.117 49.3683 103.075 49.4C97.0884 49.5569 91.0981 49.5569 85.1115 49.4C84.0697 49.3683 83.0799 49.3129 82.0554 49.2733C80.1974 49.21 78.322 49.1467 76.5248 49.0517C75.4656 48.9883 74.4585 48.8933 73.3992 48.8379C71.7062 48.7192 69.9785 48.6162 68.3288 48.4896C67.3738 48.4104 66.4622 48.2996 65.5158 48.2125C63.8662 48.0542 62.1819 47.9117 60.5843 47.7375L57.8494 47.3892C56.3214 47.1992 54.7673 47.025 53.2913 46.8112C52.4231 46.6925 51.6243 46.55 50.7735 46.4154C49.3235 46.1937 47.8649 45.98 46.4845 45.7346C45.651 45.5921 44.8956 45.4338 44.0882 45.2913C42.7772 45.0379 41.4401 44.8004 40.1812 44.5392C39.3998 44.3808 38.6792 44.1987 37.9238 44.0325C36.7257 43.7633 35.5188 43.5021 34.3902 43.225C33.6782 43.0508 33.0271 42.8608 32.3498 42.6787C31.2799 42.4093 30.2147 42.1243 29.1548 41.8237C28.5036 41.6337 27.9306 41.4358 27.3055 41.2458C26.3504 40.9529 25.3694 40.6521 24.4838 40.3513C23.9021 40.1533 23.3985 39.9475 22.8515 39.7417C22.018 39.4408 21.1585 39.14 20.4031 38.8313C19.8822 38.6175 19.4481 38.4037 18.9619 38.1979C18.2673 37.8892 17.5554 37.5883 16.939 37.2796C16.4875 37.0579 16.1228 36.8442 15.7061 36.6146C15.1591 36.3137 14.5774 36.0208 14.0999 35.72C13.7265 35.4904 13.4487 35.2608 13.1188 35.0392C12.702 34.7463 12.2679 34.4612 11.912 34.1683C11.6341 33.9387 11.4431 33.7171 11.2174 33.4796C10.9309 33.2025 10.6183 32.9254 10.4099 32.6562C10.2363 32.4187 10.1408 32.1971 10.0106 31.9754C9.85429 31.6983 9.67196 31.4371 9.58514 31.1679L9.45491 30.2733C10.1148 22.5387 44.8262 8.61333 94.0889 8.61333ZM199.855 104.595C198.831 99.6233 192.562 94.3746 179.799 87.7483L188.16 31.065L188.204 30.4871C188.213 12.5163 138.611 0 94.0976 0C49.5927 0 0 12.5163 0 30.4871L0.0434109 31.0571L20.2903 168.229C20.9067 184.078 65.7502 190 94.0889 190C109.76 190 125.475 188.512 138.351 185.796C143.543 184.704 148.188 183.421 152.173 181.996C162.418 178.299 167.705 173.66 167.914 168.229L176.118 112.67C180.954 113.707 184.939 114.23 188.178 114.23C192.866 114.23 196.009 113.145 198.023 110.96C198.831 110.091 199.414 109.068 199.729 107.967C200.045 106.865 200.094 105.713 199.855 104.595Z" fill={theme === 'dark' ? "white" : "black"} />
            </svg>
          </div>
          <span className="hidden group-hover:inline text-sm ml-2">S3</span>
        </Link>
      </div>
    </aside>
  )
}